(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0c7a92"],{5221:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("q-page",{staticClass:"flex flex-center",staticStyle:{"background-color":"#4b4b4be0"}},[i("div",{staticStyle:{width:"100%"}},[i("q-carousel",{ref:"carousel",attrs:{height:t.windowHeight,color:"white",arrows:"",thumbnails:t.thumbnails,"thumbnails-horizontal":""},on:{input:t.currentIndex}},t._l(t.$store.state.app.entregaAtual.itemAtual.midias,function(t,e){return i("q-carousel-slide",{key:e,staticClass:"carousel-slide",attrs:{"img-src":t.filePath}})}))],1),i("q-page-sticky",{attrs:{position:"top-left",offset:[5,5]}},[i("q-btn",{staticClass:"btn-carousel",attrs:{round:"",icon:"add_a_photo",size:"lg"},on:{click:function(e){t.tirarFoto()}}})],1),t.$store.state.app.entregaAtual.itemAtual.midias.length>0?i("q-page-sticky",{attrs:{position:"top-left",offset:[78,5]}},[i("q-btn",{staticClass:"btn-carousel",attrs:{round:"",icon:"delete",size:"lg"},on:{click:function(e){t.excluirFoto()}}})],1):t._e(),t.$store.state.app.entregaAtual.itemAtual.midias.length>0?i("q-page-sticky",{attrs:{position:"top",offset:[80,5]}},[i("q-btn",{staticClass:"btn-carousel",attrs:{round:"",icon:"insert_comment",size:"lg"},on:{click:function(e){t.adicionarDescricao()}}})],1):t._e(),i("q-modal",{staticClass:"modal-dark",attrs:{minimized:"",position:"top","content-css":{minWidth:"100vw"}},model:{value:t.modalMidiaDescricao,callback:function(e){t.modalMidiaDescricao=e},expression:"modalMidiaDescricao"}},[i("div",{staticStyle:{padding:"20px"}},[i("div",{staticClass:"q-display-1 q-mb-md"},[t._v("Editar descrição")]),i("q-input",{attrs:{type:"textarea",dark:"",color:"white","float-label":"Descrição"},model:{value:t.midiaDescricao,callback:function(e){t.midiaDescricao=e},expression:"midiaDescricao"}}),i("q-btn",{staticStyle:{"margin-top":"20px"},attrs:{color:"primary",label:"Salvar"},on:{click:t.salvarDescricao}})],1)])],1)},o=[];a._withStripped=!0;var s={name:"PageMidias",data:function(){return{windowHeight:0,carouselIndex:0,modalMidiaDescricao:!1,midiaDescricao:null,thumbnails:[]}},methods:{updateThumbnails:function(){this.thumbnails=[];for(var t=0;t<this.$store.state.app.entregaAtual.itemAtual.midias.length;t++)this.thumbnails.push(this.$store.state.app.entregaAtual.itemAtual.midias[t].filePath)},currentIndex:function(t){this.carouselIndex=t},getWindowHeight:function(){this.windowHeight=window.innerHeight-50+"px"},adicionarDescricao:function(){this.midiaDescricao=this.$store.state.app.entregaAtual.itemAtual.midias[this.carouselIndex].descricao,this.modalMidiaDescricao=!0},salvarDescricao:function(){this.$store.state.app.entregaAtual.itemAtual.midias[this.carouselIndex].descricao=this.midiaDescricao,this.modalMidiaDescricao=!1},excluirFoto:function(){var t=this;this.$uiUtil.showConfirmDeleteMessage("Tem certeza de que deseja excluir a imagem atual?","Excluir imagem").then(function(){t.$store.state.app.entregaAtual.itemAtual.midias.splice(t.carouselIndex,1),t.carouselIndex>=t.$store.state.app.entregaAtual.itemAtual.midias.length-1&&(t.updateThumbnails(),t.$refs.carousel.goToSlide(t.carouselIndex-1))}).catch(function(){})},tirarFoto:function(){var t=this;setTimeout(navigator.camera.getPicture(function(e){t.moveAndSaveFileURI(e)},function(e){console.log(e),t.$uiUtil.showErrorMessage("Não foi possível acessar a camera do dispositivo")},{quality:50,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG,correctOrientation:!0}),1e3)},moveAndSaveFileURI:function(t){var e=this,i=t.substring(t.lastIndexOf("/")+1);window.resolveLocalFileSystemURL(t,function(t){var a=cordova.file.externalDataDirectory;window.resolveLocalFileSystemURL(a,function(a){a.getDirectory("imagens",{create:!0},function(a){var o=new Date,s=o.getDate(),n=o.getMonth()+1,c=o.getFullYear(),r=c+"-"+n+"-"+s+"P_"+i;t.moveTo(a,r,function(t){var i={filePath:t.nativeURL,descricao:null};e.$store.state.app.entregaAtual.itemAtual.midias.push(i),e.updateThumbnails(),e.$refs.carousel.goToSlide(e.thumbnails.length-1)},function(t){console.log(t)})},function(t){console.log(t)})},function(t){console.log(t)})},function(t){console.log(t)})}},created:function(){this.updateThumbnails(),this.getWindowHeight(),0===this.$store.state.app.entregaAtual.itemAtual.midias.length&&this.tirarFoto()},mounted:function(){this.$nextTick(function(){window.addEventListener("resize",this.getWindowHeight)})}},n=s,c=i("a6c2"),r=Object(c["a"])(n,a,o,!1,null,null,null);r.options.__file="Midias.vue";e["default"]=r.exports}}]);