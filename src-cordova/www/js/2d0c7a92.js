(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0c7a92"],{5221:function(t,i,e){"use strict";e.r(i);var a=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("q-page",{staticClass:"flex flex-center",staticStyle:{"background-color":"#4b4b4be0"}},[e("div",{staticStyle:{width:"100%"}},[e("q-carousel",{ref:"carousel",attrs:{height:t.windowHeight,color:"white",arrows:"",thumbnails:t.thumbnails,"thumbnails-horizontal":""},on:{input:t.currentIndex}},t._l(t.$store.state.app.entregaAtual.itemAtual.midias,function(t,i){return e("q-carousel-slide",{key:i,staticClass:"carousel-slide",attrs:{"img-src":t.filePath}})}))],1),e("q-page-sticky",{attrs:{position:"top-left",offset:[5,5]}},[e("q-btn",{staticClass:"btn-carousel",attrs:{round:"",icon:"add_a_photo",size:"lg"},on:{click:function(i){t.tirarFoto()}}})],1),t.$store.state.app.entregaAtual.itemAtual.midias.length>0?e("q-page-sticky",{attrs:{position:"top-left",offset:[78,5]}},[e("q-btn",{staticClass:"btn-carousel",attrs:{round:"",icon:"delete",size:"lg"},on:{click:function(i){t.excluirFoto()}}})],1):t._e(),t.$store.state.app.entregaAtual.itemAtual.midias.length>0?e("q-page-sticky",{attrs:{position:"top",offset:[80,5]}},[e("q-btn",{staticClass:"btn-carousel",attrs:{round:"",icon:"insert_comment",size:"lg"},on:{click:function(i){t.adicionarDescricao()}}})],1):t._e(),e("q-modal",{staticClass:"modal-dark",attrs:{minimized:"",position:"top","content-css":{minWidth:"100vw"}},model:{value:t.modalMidiaDescricao,callback:function(i){t.modalMidiaDescricao=i},expression:"modalMidiaDescricao"}},[e("div",{staticStyle:{padding:"20px"}},[e("div",{staticClass:"q-display-1 q-mb-md"},[t._v("Editar descrição")]),e("q-input",{attrs:{type:"textarea",dark:"",color:"white","float-label":"Descrição"},model:{value:t.midiaDescricao,callback:function(i){t.midiaDescricao=i},expression:"midiaDescricao"}}),e("q-btn",{staticStyle:{"margin-top":"20px"},attrs:{color:"primary",label:"Salvar"},on:{click:t.salvarDescricao}})],1)])],1)},o=[];a._withStripped=!0;var s={name:"PageMidias",data:function(){return{windowHeight:0,carouselIndex:0,modalMidiaDescricao:!1,midiaDescricao:null,thumbnails:[]}},methods:{updateThumbnails:function(){this.thumbnails=[];for(var t=0;t<this.$store.state.app.entregaAtual.itemAtual.midias.length;t++)this.thumbnails.push(this.$store.state.app.entregaAtual.itemAtual.midias[t].filePath)},currentIndex:function(t){this.carouselIndex=t},getWindowHeight:function(){this.windowHeight=window.innerHeight-50+"px"},adicionarDescricao:function(){this.midiaDescricao=this.$store.state.app.entregaAtual.itemAtual.midias[this.carouselIndex].descricao,this.modalMidiaDescricao=!0},salvarDescricao:function(){this.$store.state.app.entregaAtual.itemAtual.midias[this.carouselIndex].descricao=this.midiaDescricao,this.modalMidiaDescricao=!1},excluirFoto:function(){var t=this;this.$uiUtil.showConfirmDeleteMessage("Tem certeza de que deseja excluir a imagem atual?","Excluir imagem").then(function(){t.$store.state.app.entregaAtual.itemAtual.midias.splice(t.carouselIndex,1),t.carouselIndex>=t.$store.state.app.entregaAtual.itemAtual.midias.length-1&&t.$refs.carousel.goToSlide(t.carouselIndex-1)}).catch(function(){})},tirarFoto:function(){var t=this;navigator.camera.getPicture(function(i){var e=i.substring(i.lastIndexOf("/")+1);window.resolveLocalFileSystemURL(i,function(i){var a=cordova.file.externalDataDirectory;window.resolveLocalFileSystemURL(a,function(a){a.getDirectory("imagens",{create:!0},function(a){var o=new Date,s=o.getDate(),n=o.getMonth()+1,c=o.getFullYear(),r=c+"-"+n+"-"+s+"P_"+e;i.moveTo(a,r,function(i){var e={filePath:i.nativeURL,descricao:null};t.$store.state.app.entregaAtual.itemAtual.midias.push(e),t.updateThumbnails(),t.$refs.carousel.goToSlide(t.thumbnails.length-1)},function(t){console.log(t)})},function(t){console.log(t)})},function(t){console.log(t)})},function(t){console.log(t)})},function(i){console.log(i),t.$uiUtil.showErrorMessage("Não foi possível acessar a camera do dispositivo")},{quality:50,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG})}},created:function(){this.updateThumbnails(),this.getWindowHeight()},mounted:function(){this.$nextTick(function(){window.addEventListener("resize",this.getWindowHeight)})}},n=s,c=e("a6c2"),r=Object(c["a"])(n,a,o,!1,null,null,null);r.options.__file="Midias.vue";i["default"]=r.exports}}]);