(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["2d0b322b"],{"26a2":function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("q-page",{staticClass:"row justify-center",attrs:{padding:""}},[o("div",{staticStyle:{width:"500px","max-width":"90vw"}},[o("div",{staticClass:"q-headline"},[t._v("Entrega")]),o("q-field",{attrs:{label:t.$store.state.app.entregaAtual.descricao}},[o("q-field",{attrs:{label:t.$store.state.app.entregaAtual.subdescricao}})],1),t.$store.state.app.entregaAtual.address||t.$store.state.app.entregaAtual.latitudeentrega&&t.$store.state.app.entregaAtual.longitudeentrega?o("q-btn",{staticClass:"full-width q-my-md",attrs:{align:"around",rounded:"",color:"primary",icon:"directions",label:"Visualizar Rota",size:"md"},on:{click:t.visualizarRota}}):t._e(),o("q-item-separator"),o("div",{staticClass:"row"},[o("div",{staticClass:"col-12",staticStyle:{"font-size":"1.2em"}},[o("q-toggle",{attrs:{"checked-icon":"check","unchecked-icon":"close","left-label":"",color:"positive",label:"Entrega realizada?","true-value":"Sim","false-value":"Não"},on:{input:t.onChangeConfirmaEntrega},model:{value:t.confirmaEntrega,callback:function(a){t.confirmaEntrega=a},expression:"confirmaEntrega"}}),t._v(" "+t._s(t.confirmaEntrega)+"\n      ")],1),o("div",{staticClass:"col-12 q-mt-sm q-mb-sm"},[o("q-btn-group",{staticClass:"full-width"},[o("q-btn",{staticClass:"half-width",attrs:{align:"center",size:"sm",color:"tertiary",label:"Foto do Recibo",icon:"photo_camera"},on:{click:t.tirarFotoRecibo}},[o("q-icon",{staticClass:"s-size",attrs:{name:t.fotoReciboStatus.icon,color:t.fotoReciboStatus.color}})],1),o("q-btn",{staticClass:"half-width",attrs:{align:"center",size:"sm",color:"tertiary",label:"Observação",icon:"add_comment"},on:{click:t.adicionarObservacao}})],1)],1)]),o("q-select",{attrs:{"float-label":"Motivo do retorno","inverted-light":"",color:t.motivoRetornoColor,separator:"",options:t.$store.state.app.motivosRetorno},on:{input:t.onChangeMotivoRetorno},model:{value:t.motivoRetorno,callback:function(a){t.motivoRetorno=a},expression:"motivoRetorno"}}),o("q-item-separator"),o("q-list",{staticClass:"q-mt-md dark-example",attrs:{"no-border":"",striped:""}},[o("div",{staticClass:"q-headline"},[t._v("Itens")]),t._l(t.$store.state.app.entregaAtual.itens,function(a,e){return o("q-item",{key:e,nativeOn:{click:function(o){t.entregas(a)}}},[o("q-item-main",[o("q-item-tile",{attrs:{label:""}},[t._v(t._s(a.descricao))]),o("q-item-tile",{attrs:{sublabel:""}},[t._v("Quantidade: "+t._s(a.quantidade))]),o("q-item-tile",{directives:[{name:"show",rawName:"v-show",value:"S"==a.requerfoto,expression:"item.requerfoto == 'S'"}],attrs:{label:"",color:"negative"}},[t._v("Necessário tirar foto")])],1),o("q-item-side",[o("q-btn",{attrs:{round:"",color:"primary",icon:"photo_camera"},nativeOn:{click:function(o){t.tirarFoto(a)}}})],1)],1)})],2)],1),o("q-modal",{staticClass:"modal-dark",attrs:{minimized:"",position:"right","content-css":{minWidth:"90vw"}},on:{show:t.onModalShowObservacao},model:{value:t.modalObservacao,callback:function(a){t.modalObservacao=a},expression:"modalObservacao"}},[o("div",{staticStyle:{padding:"20px"}},[o("div",{staticClass:"q-display-1 q-mb-md"},[t._v("Observação")]),o("q-input",{ref:"observacao",attrs:{dark:"",color:"white",type:"textarea","stack-label":"Observação"},model:{value:t.observacao,callback:function(a){t.observacao=a},expression:"observacao"}}),o("q-btn",{staticStyle:{"margin-top":"20px"},attrs:{color:"primary",label:"Salvar"},on:{click:t.salvarObservacao}})],1)])],1)},i=[];e._withStripped=!0;var r={name:"PageEntrega",data:function(){return{motivoRetorno:null,confirmaEntrega:"Não",motivoRetornoColor:"white",modalObservacao:!1,observacao:null,fotoReciboStatus:{icon:"close",color:"negative"}}},methods:{entregas:function(){},onModalShowObservacao:function(){this.$refs.observacao.focus()},adicionarObservacao:function(){this.observacao=this.$store.state.app.entregaAtual.ocorrencia.observacao,this.modalObservacao=!0},salvarObservacao:function(){this.$store.state.app.entregaAtual.ocorrencia.observacao=this.observacao,this.modalObservacao=!1},tirarFotoRecibo:function(){var t=this;navigator.camera.getPicture(function(a){var o=a.substring(a.lastIndexOf("/")+1);window.resolveLocalFileSystemURL(a,function(a){var e=cordova.file.externalDataDirectory;window.resolveLocalFileSystemURL(e,function(e){e.getDirectory("imagens",{create:!0},function(e){var i=new Date,r=i.getDate(),s=i.getMonth()+1,n=i.getFullYear(),c=n+"-"+s+"-"+r+"R_"+o;a.moveTo(e,c,function(a){t.$store.state.app.entregaAtual.ocorrencia.imagemReciboPath=a.nativeURL,t.fotoReciboStatus.icon="check",t.fotoReciboStatus.color="positive"},function(t){console.log(t)})},function(t){console.log(t)})},function(t){console.log(t)})},function(t){console.log(t)})},function(a){console.log(a),t.$uiUtil.showErrorMessage("Não foi possível acessar a camera do dispositivo")},{quality:50,destinationType:Camera.DestinationType.FILE_URI,encodingType:Camera.EncodingType.JPEG})},tirarFoto:function(t){this.$store.commit("app/setItemAtual",t),this.$uiUtil.gotoPage(this,"midias")},visualizarRota:function(){this.$uiUtil.gotoPage(this,"entregarota")},onChangeConfirmaEntrega:function(t){if("Sim"===t){var a=!0;if(this.$store.state.app.entregaAtual.ocorrencia.imagemReciboPath)for(var o=0;o<this.$store.state.app.entregaAtual.itens.length;o++)"S"===this.$store.state.app.entregaAtual.itens[o].requerfoto&&(this.$store.state.app.entregaAtual.itens[o].midias?this.$store.state.app.entregaAtual.itens[o].midias&&0===this.$store.state.app.entregaAtual.itens[o].midias.length&&(a=!1,this.$uiUtil.showErrorMessage("Obrigatório tirar foto do item "+this.$store.state.app.entregaAtual.itens[o].descricao)):(a=!1,this.$uiUtil.showErrorMessage("Obrigatório tirar foto do item "+this.$store.state.app.entregaAtual.itens[o].descricao)));else a=!1,this.$uiUtil.showErrorMessage("Obrigatório tirar foto do recibo");a?(this.motivoRetorno=null,this.motivoRetornoColor="white",this.$store.state.app.entregaAtual.ocorrencia.confirmaEntrega=t,this.$store.state.app.entregaAtual.ocorrencia.idCargaEntregaMotivoRetorno=null):(this.confirmaEntrega="Não",this.$store.state.app.entregaAtual.ocorrencia.confirmaEntrega=this.confirmaEntrega)}},onChangeMotivoRetorno:function(t){this.motivoRetornoColor="red-3",this.$store.state.app.entregaAtual.ocorrencia.idCargaEntregaMotivoRetorno=t,"Sim"===this.confirmaEntrega&&(this.confirmaEntrega="Não",this.$store.state.app.entregaAtual.ocorrencia.confirmaEntrega=this.confirmaEntrega)}},created:function(){this.confirmaEntrega=this.$store.state.app.entregaAtual.ocorrencia.confirmaEntrega?this.$store.state.app.entregaAtual.ocorrencia.confirmaEntrega:"Não",this.motivoRetorno=this.$store.state.app.entregaAtual.ocorrencia.idCargaEntregaMotivoRetorno?this.$store.state.app.entregaAtual.ocorrencia.idCargaEntregaMotivoRetorno:null,this.motivoRetornoColor=this.$store.state.app.entregaAtual.ocorrencia.idCargaEntregaMotivoRetorno?"red-3":"white",null!==this.$store.state.app.entregaAtual.ocorrencia.imagemReciboPath&&(this.fotoReciboStatus.icon="check",this.fotoReciboStatus.color="positive")}},s=r,n=o("a6c2"),c=Object(n["a"])(s,e,i,!1,null,null,null);c.options.__file="Entrega.vue";a["default"]=c.exports}}]);